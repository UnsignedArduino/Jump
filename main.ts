scene.onHitWall(SpriteKind.Player, function (sprite, location) {
    if (sprite.isHittingTile(CollisionDirection.Bottom)) {
        jumps_made = 0
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (jumps_made < jumps_max) {
        jump(sprite_player, gravity, 32)
        jumps_made += 1
    }
})
function jump (sprite: Sprite, gravity: number, pixels: number) {
    sprite.vy = Math.sqrt(2 * (gravity * pixels)) * -1
}
function animate_player (sprite: Sprite) {
    character.loopFrames(
    sprite,
    [img`
        . 8 8 8 8 8 . . 
        8 8 8 8 8 8 8 . 
        . f 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . 6 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . . . . . 6 . . 
        . . . . . 6 . . 
        `,img`
        . 8 8 8 8 8 . . 
        8 8 8 8 8 8 8 . 
        . f 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . 6 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . 6 . . . . . . 
        . 6 . . . . . . 
        `],
    200,
    character.rule(Predicate.MovingLeft)
    )
    character.loopFrames(
    sprite,
    [img`
        . 8 8 8 8 8 . . 
        8 8 8 8 8 8 8 . 
        . f 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . 6 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . 6 . . . 6 . . 
        . 6 . . . 6 . . 
        `],
    200,
    character.rule(Predicate.NotMoving, Predicate.FacingLeft)
    )
    character.loopFrames(
    sprite,
    [img`
        . 8 8 8 8 8 . . 
        8 8 8 8 8 8 8 . 
        . 6 6 f 6 f . . 
        . 6 6 6 6 6 . . 
        . 6 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . 6 . . . . . . 
        . 6 . . . . . . 
        `,img`
        . 8 8 8 8 8 . . 
        8 8 8 8 8 8 8 . 
        . 6 6 f 6 f . . 
        . 6 6 6 6 6 . . 
        . 6 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . . . . . 6 . . 
        . . . . . 6 . . 
        `],
    200,
    character.rule(Predicate.MovingRight)
    )
    character.loopFrames(
    sprite,
    [img`
        . 8 8 8 8 8 . . 
        8 8 8 8 8 8 8 . 
        . 6 6 f 6 f . . 
        . 6 6 6 6 6 . . 
        . 6 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . 6 . . . 6 . . 
        . 6 . . . 6 . . 
        `],
    200,
    character.rule(Predicate.NotMoving, Predicate.FacingRight)
    )
    character.loopFrames(
    sprite,
    [img`
        . 8 8 8 8 8 . . 
        8 8 8 8 8 8 8 . 
        . 6 f 6 f 6 . . 
        . 6 6 6 6 6 . . 
        . 6 6 f 6 6 . . 
        . 6 6 6 6 6 . . 
        . 6 . . . 6 . . 
        . 6 . . . 6 . . 
        `],
    200,
    character.rule(Predicate.MovingUp)
    )
    character.loopFrames(
    sprite,
    [img`
        . 8 8 8 8 8 . . 
        8 8 8 8 8 8 8 . 
        . 6 6 6 6 6 . . 
        . 6 f 6 f 6 . . 
        . 6 6 6 6 6 . . 
        . 6 6 f 6 6 . . 
        . 6 . . . 6 . . 
        . 6 . . . 6 . . 
        `],
    200,
    character.rule(Predicate.MovingDown)
    )
}
let sprite_player: Sprite = null
let jumps_made = 0
let jumps_max = 0
let gravity = 0
gravity = 400
jumps_max = 2
jumps_made = 0
sprite_player = sprites.create(img`
    . 8 8 8 8 8 . . 
    8 8 8 8 8 8 8 . 
    . 6 f 6 f 6 . . 
    . 6 6 6 6 6 . . 
    . 6 6 f 6 6 . . 
    . 6 6 6 6 6 . . 
    . 6 . . . 6 . . 
    . 6 . . . 6 . . 
    `, SpriteKind.Player)
animate_player(sprite_player)
controller.moveSprite(sprite_player, 100, 0)
sprite_player.ay = gravity
scene.setBackgroundColor(9)
tiles.setSmallTilemap(tiles.createTilemap(hex`14003c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010101010101010101010101010101010101`, img`
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    ....................
    22222222222222222222
    `, [myTiles.transparency8,myTiles.tile1], TileScale.Eight))
scene.cameraFollowSprite(sprite_player)
tiles.placeOnTile(sprite_player, tiles.getTileLocation(1, 58))
